---
version: "3"

services:

  keystone:
    build: .
    container_name: openstack_keystone
    ports:
      - "0.0.0.0:35357:35357"
      - "0.0.0.0:5000:5000"
    networks:
      openstack-management-net:
        ipv4_address: {{openstack_services.keystone.ipv4}}
    volumes:
      - keystone_log:/var/log/keystone
    command: ["bash", "/opt/start.sh"]

volumes:
  keystone_log:
    driver: local

networks:
  openstack-management-net:
    external: true